# 02 数据持久性

对于存储系统而言，与业务不中断一样重要的是数据不丢失，用于衡量数据不丢失能力的指标就叫做数据持久度（Durability）。对于存储而言只要数据可访问，就属于系统可用度范畴，而此时数据可能是完全的，也可能是不完全的（比如副本/分片有缺失，但是仍然能够拼出完整的数据）。如果数据暂时不可访问，但是可以通过应急修复、备份恢复等手段找回来，这就属于数据持久度范畴。如果数据找不回来了，那么对这些数据而言，系统可用性和数据持久性都没有了。

持久性比可用性更基础，持久性是可用性的必要非充分条件，通常从数值上来看，持久性>=可用性。影响一个存储系统数据持久度的关键因素有三个：副本冗余度，存储介质故障率，数据修复时间。

1） 副本冗余度：常见的2副本（冗余度1）,3副本（冗余度2），EC6+3(冗余度3)，该值越大，数据持久性越高，但是也意味着空间利用率越低，因此需要和空间利用率、性能做一个均衡。通常情况下，增加一个冗余度，持久度可增加2个9

2） 存储介质故障率：一般指的是年故障率AFR，普通机械硬盘实际上可达到年故障率3%以上（3%-8%之间），该值越小数据持久性越高（随着硬盘年失效率增加，“数据失效率增加倍数”为“硬盘失效率增加倍数”的“冗余数+1”次方）

3）数据修复时间：指的是出现了部分副本数据损坏或者丢失后（数据降级状态），恢复到所有的副本一致的时间（数据完整状态）。该时间越短数据持久度越高。